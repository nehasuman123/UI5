sap.ui.define(["sap/ui/core/util/MockServer","sap/base/Log","sap/base/util/UriParameters","sap/ui/util/XMLHelper"],function(e,r,t,a){"use strict";var i,n="SalesOrders/",s=n+"localService/mockdata";return{init:function(){var o=new t(window.location.href),u=sap.ui.require.toUrl(s),p=sap.ui.require.toUrl(n+"manifest"+".json"),c="SalesOrderSet",l=o.get("errorType"),f=l==="badRequest"?400:500,d=jQuery.sap.syncGetJSON(p).data,g=d["sap.app"].dataSources,m=g.mainService,h=sap.ui.require.toUrl(n+m.settings.localUri.replace(".xml","")+".xml"),x=/.*\/$/.test(m.uri)?m.uri:m.uri+"/",S=m.settings.annotations;i=new e({rootUri:x});e.config({autoRespond:true,autoRespondAfter:o.get("serverDelay")||1e3});i.simulate(h,{sMockdataBaseUrl:u,bGenerateMissingMockData:true});var v=i.getRequests(),U=function(e,r,t){t.response=function(t){t.respond(e,{"Content-Type":"text/plain;charset=utf-8"},r)}};if(o.get("metadataError")){v.forEach(function(e){if(e.path.toString().indexOf("$metadata")>-1){U(500,"metadata Error",e)}})}if(l){v.forEach(function(e){if(e.path.toString().indexOf(c)>-1){U(f,l,e)}})}i.start();r.info("Running the app with mock data");if(S&&S.length>0){S.forEach(function(r){var t=g[r],i=t.uri,s=sap.ui.require.toUrl(n+t.settings.localUri.replace(".xml","")+".xml");new e({rootUri:i,requests:[{method:"GET",path:new RegExp("([?#].*)?"),response:function(e){sap.ui.require("jquery.sap.xml");var r=jQuery.sap.sjax({url:s,dataType:"xml"}).data;e.respondXML(200,{},a.serialize(r));return true}}]}).start()})}},getMockServer:function(){return i}}});